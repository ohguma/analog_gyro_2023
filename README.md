# アナログ出力ジャイロセンサ 2023年版


+ 回路とキャリブレーション部分は[アナログ出力ジャイロセンサ 2021年版](https://github.com/ohguma/analog_gyro_2021)を使いまわし。
+ 電源が5Vのマイコンキットなどのアナログ入力で利用する前提。
+ Arduino 互換機として作成。


## スケッチについて

+ 起動時の方向を基準として動作する。基準向きの場合に2.5Vを出力し、それより右に向くと電圧が下がり（最小0V）、左に向くと電圧が上がる（最大5V）。基準向きの反対方向で0Vと5Vが入れ替わる。
+ 基準向きから+-1度の範囲内で中央のLEDが点灯する。基準向きから+-3度の範囲内で左右のLEDが点灯する。それ以外の向きはLEDは消灯する。
+ タクトスイッチを短押しした時の方向を基準方向としてリセットする。3秒以上長押しするとキャリブレーションを開始する。キャリブレーション時はセンサーは静止した状態にしておき、LEDが3つとも点灯したらスイッチを離し、キャリブレーションの終了を待つ（数十秒）。 
+ キャリブレーション時に取得したジャイロセンサのオフセット値はEEPROMに保存する。起動時にはEEPROMからオフセット値を読み込んで動作するため、最初にスケッチをアップロードした際にはすぐにキャリブレーションする。


## 基板・回路図

+ 基板、回路図については[アナログ出力ジャイロセンサ 2021年版](https://github.com/ohguma/analog_gyro_2021)とかわらない。
+ パーツリストはこちら。[partscab.net アナログ出力ジャイロセンサ](https://partscabi.net/list/b1c6fa31-ba73-4adc-bf38-80c67f19f55f)
  - MPU6050以外は秋月で購入可能
  - MPU6050はamazon等で購入 

----
2025-06-15 ohguma